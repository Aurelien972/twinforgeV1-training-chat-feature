/* =========================================
   FRIDGE SCAN STYLES - VisionOS 26 TwinForge
   Styles pour le Scanner de Frigo et l'Atelier de Recettes
   Thème rose harmonisé avec le système TwinForge
   ========================================= */

/* =========================================
   VARIABLES SPÉCIFIQUES AU SCANNER DE FRIGO
   ========================================= */

:root {
  /* Couleurs principales - Thème Rose */
  --fridge-scan-primary: #EC4899;
  --fridge-scan-secondary: #F472B6;
  --fridge-scan-accent: #DB2777;
  --fridge-scan-light: #FBCFE8;

  /* Opacités et transparences */
  --fridge-glass-opacity: rgba(11, 14, 23, 0.85);
  --fridge-border-opacity: 0.45;
  --fridge-glow-opacity: 0.5;

  /* Durées d'animation */
  --fridge-anim-fast: 0.3s;
  --fridge-anim-medium: 0.5s;
  --fridge-anim-slow: 2.5s;
  --fridge-anim-breathing: 3.5s;
}

/* =========================================
   GLASS CARD - Base pour toutes les cards
   ========================================= */

.fridge-glass-scan {
  position: relative;
  background:
    radial-gradient(circle at 30% 20%, color-mix(in srgb, var(--fridge-scan-primary) 18%, transparent) 0%, transparent 60%),
    radial-gradient(circle at 70% 80%, color-mix(in srgb, var(--fridge-scan-secondary) 15%, transparent) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, color-mix(in srgb, var(--fridge-scan-accent) 12%, transparent) 0%, transparent 70%),
    linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.10)),
    var(--fridge-glass-opacity);

  border: 2px solid color-mix(in srgb, var(--fridge-scan-primary) var(--fridge-border-opacity), transparent);

  box-shadow:
    0 16px 48px rgba(0, 0, 0, 0.3),
    0 0 36px color-mix(in srgb, var(--fridge-scan-primary) 25%, transparent),
    0 0 72px color-mix(in srgb, var(--fridge-scan-secondary) 20%, transparent),
    inset 0 2px 0 rgba(255, 255, 255, 0.18),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);

  backdrop-filter: blur(28px) saturate(160%);
  -webkit-backdrop-filter: blur(28px) saturate(160%);

  border-radius: var(--radius-2xl, 1.5rem);

  /* GPU Optimizations */
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  contain: layout style paint;
  will-change: transform, opacity;
}

/* =========================================
   ICON CONTAINER - Icône principale avec effets spatiaux
   ========================================= */

.fridge-icon-scan {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-full);

  /* Fond avec double gradient - plus subtil */
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
    radial-gradient(circle at 70% 70%, color-mix(in srgb, var(--fridge-scan-primary) 20%, transparent) 0%, transparent 50%),
    linear-gradient(135deg,
      color-mix(in srgb, var(--fridge-scan-primary) 40%, transparent),
      color-mix(in srgb, var(--fridge-scan-secondary) 35%, transparent)
    );

  /* Bordure unique, claire et visible */
  border: 3px solid color-mix(in srgb, var(--fridge-scan-primary) 50%, transparent);

  /* Ombres et lueur optimisées */
  box-shadow:
    0 0 30px color-mix(in srgb, var(--fridge-scan-primary) 40%, transparent),
    0 0 60px color-mix(in srgb, var(--fridge-scan-secondary) 30%, transparent),
    inset 0 2px 0 rgba(255,255,255,0.3),
    inset 0 -1px 0 rgba(0,0,0,0.15);

  /* Effet de verre léger */
  backdrop-filter: blur(16px) saturate(150%);
  -webkit-backdrop-filter: blur(16px) saturate(150%);

  /* GPU Optimizations */
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  will-change: transform, box-shadow;
  isolation: isolate;
}

/* Animation de respiration douce */
.fridge-icon-scan:not(.no-animate) {
  animation: fridge-breathing-icon var(--fridge-anim-breathing) ease-in-out infinite;
}

/* Force les icônes enfants à ne pas avoir de bordure */
.fridge-icon-scan > * {
  border: none !important;
  outline: none !important;
}

@keyframes fridge-breathing-icon {
  0%, 100% {
    transform: scale(1) translateZ(0);
    box-shadow:
      0 0 30px color-mix(in srgb, var(--fridge-scan-primary) 40%, transparent),
      0 0 60px color-mix(in srgb, var(--fridge-scan-secondary) 30%, transparent),
      inset 0 2px 0 rgba(255,255,255,0.3);
  }
  50% {
    transform: scale(1.04) translateZ(0);
    box-shadow:
      0 0 40px color-mix(in srgb, var(--fridge-scan-primary) 60%, transparent),
      0 0 80px color-mix(in srgb, var(--fridge-scan-secondary) 45%, transparent),
      0 0 120px color-mix(in srgb, var(--fridge-scan-primary) 30%, transparent),
      inset 0 2px 0 rgba(255,255,255,0.4);
  }
}

/* =========================================
   FOCUS EFFECT - Anneaux de pulsation
   ========================================= */

.fridge-ai-focus::after,
.fridge-ai-focus::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 2px solid color-mix(in srgb, var(--fridge-scan-primary) 65%, transparent);
  pointer-events: none;
  animation: fridge-pulse-ring var(--fridge-anim-slow) ease-out infinite;
  transform: translateZ(0);
  backface-visibility: hidden;
}

.fridge-ai-focus::before {
  animation-delay: 0.6s;
  border-color: color-mix(in srgb, var(--fridge-scan-secondary) 55%, transparent);
}

@keyframes fridge-pulse-ring {
  0% {
    transform: scale(1) translateZ(0);
    opacity: 0.8;
  }
  100% {
    transform: scale(1.8) translateZ(0);
    opacity: 0;
  }
}

/* =========================================
   PRIMARY BUTTON - Bouton d'action principal
   ========================================= */

.fridge-btn-scan-primary {
  position: relative;
  overflow: hidden;

  background: linear-gradient(135deg,
    color-mix(in srgb, var(--fridge-scan-primary) 85%, transparent),
    color-mix(in srgb, var(--fridge-scan-secondary) 70%, transparent),
    color-mix(in srgb, var(--fridge-scan-accent) 60%, transparent)
  );

  border: 2px solid color-mix(in srgb, var(--fridge-scan-primary) 60%, transparent);

  box-shadow:
    0 20px 50px color-mix(in srgb, var(--fridge-scan-primary) 45%, transparent),
    0 0 100px color-mix(in srgb, var(--fridge-scan-primary) 35%, transparent),
    inset 0 3px 0 rgba(255,255,255,0.5),
    inset 0 -1px 0 rgba(0,0,0,0.2);

  color: white;
  font-weight: 700;
  border-radius: var(--radius-2xl, 1.5rem);

  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);

  transition: all var(--fridge-anim-fast) ease-in-out;

  /* GPU Optimizations */
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  will-change: transform, box-shadow;
  contain: layout style paint;
}

.fridge-btn-scan-primary:hover:not(:disabled) {
  transform: translateY(-3px) scale(1.03) translateZ(0);
  box-shadow:
    0 24px 60px color-mix(in srgb, var(--fridge-scan-primary) 55%, transparent),
    0 0 130px color-mix(in srgb, var(--fridge-scan-primary) 45%, transparent),
    inset 0 3px 0 rgba(255,255,255,0.6);
}

.fridge-btn-scan-primary:active:not(:disabled) {
  transform: translateY(0) scale(1) translateZ(0);
}

.fridge-btn-scan-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  filter: grayscale(0.3);
}

/* Shimmer Effect */
.fridge-btn-scan-primary .shimmer-effect {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(255,255,255,0.45) 50%,
    transparent 100%
  );
  animation: fridge-shimmer var(--fridge-anim-slow) ease-in-out infinite;
  pointer-events: none;
  transform: translateZ(0);
}

@keyframes fridge-shimmer {
  0% { transform: translateX(-200%) translateZ(0); }
  100% { transform: translateX(200%) translateZ(0); }
}

/* =========================================
   DANGER BUTTON - Bouton de sortie
   ========================================= */

.fridge-btn-danger {
  position: relative;
  padding: 0.75rem 1.5rem;

  background: rgba(239, 68, 68, 0.1);
  border: 2px solid rgba(239, 68, 68, 0.3);
  border-radius: var(--radius-xl, 1.25rem);

  color: rgba(239, 68, 68, 1);
  font-weight: 600;
  font-size: 0.95rem;

  backdrop-filter: blur(16px) saturate(140%);
  -webkit-backdrop-filter: blur(16px) saturate(140%);

  box-shadow:
    0 4px 12px rgba(239, 68, 68, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);

  transition: all var(--fridge-anim-fast) ease-in-out;

  /* GPU Optimizations */
  transform: translateZ(0);
  backface-visibility: hidden;
  cursor: pointer;
}

.fridge-btn-danger:hover {
  background: rgba(239, 68, 68, 0.15);
  border-color: rgba(239, 68, 68, 0.5);
  transform: translateY(-2px) translateZ(0);
  box-shadow:
    0 6px 16px rgba(239, 68, 68, 0.25),
    0 0 30px rgba(239, 68, 68, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.fridge-btn-danger:active {
  transform: translateY(0) translateZ(0);
}

/* =========================================
   MOBILE OPTIMIZATIONS
   ========================================= */

@media (max-width: 768px) {
  .fridge-glass-scan {
    backdrop-filter: blur(20px) saturate(150%);
    -webkit-backdrop-filter: blur(20px) saturate(150%);
    border-width: 1.5px;
  }

  .fridge-icon-scan {
    border-width: 2px;
    backdrop-filter: blur(12px) saturate(140%);
    -webkit-backdrop-filter: blur(12px) saturate(140%);
  }

  /* Ralentir les animations sur mobile */
  .fridge-icon-scan:not(.no-animate) {
    animation-duration: 4s;
  }

  .fridge-ai-focus::after,
  .fridge-ai-focus::before {
    animation-duration: 3s;
  }

  .fridge-btn-scan-primary .shimmer-effect {
    animation-duration: 3s;
  }

  /* Boutons plus compacts sur mobile */
  .fridge-btn-scan-primary {
    min-height: 44px;
    padding: 0.875rem 2rem;
  }

  .fridge-btn-danger {
    min-height: 44px;
    padding: 0.625rem 1.25rem;
    font-size: 0.875rem;
  }
}

/* =========================================
   PERFORMANCE MODE
   ========================================= */

.perf-low .fridge-glass-scan,
.performance-mode .fridge-glass-scan {
  backdrop-filter: blur(12px) saturate(130%) !important;
  -webkit-backdrop-filter: blur(12px) saturate(130%) !important;
}

.perf-low .fridge-icon-scan,
.performance-mode .fridge-icon-scan {
  animation: none !important;
  backdrop-filter: blur(8px) saturate(120%) !important;
  -webkit-backdrop-filter: blur(8px) saturate(120%) !important;
}

.perf-low .fridge-ai-focus::after,
.perf-low .fridge-ai-focus::before,
.performance-mode .fridge-ai-focus::after,
.performance-mode .fridge-ai-focus::before {
  animation: none !important;
  opacity: 0 !important;
}

.perf-low .fridge-btn-scan-primary .shimmer-effect,
.performance-mode .fridge-btn-scan-primary .shimmer-effect {
  animation: none !important;
  opacity: 0 !important;
}

/* =========================================
   REDUCED MOTION SUPPORT
   ========================================= */

@media (prefers-reduced-motion: reduce) {
  .fridge-icon-scan,
  .fridge-ai-focus::after,
  .fridge-ai-focus::before,
  .fridge-btn-scan-primary .shimmer-effect {
    animation: none !important;
  }

  .fridge-icon-scan {
    transform: scale(1) translateZ(0) !important;
  }

  .fridge-ai-focus::after,
  .fridge-ai-focus::before {
    opacity: 0.4 !important;
    transform: scale(1.5) translateZ(0) !important;
  }

  .fridge-btn-scan-primary .shimmer-effect {
    opacity: 0 !important;
  }
}

/* =========================================
   HIGH CONTRAST MODE
   ========================================= */

@media (prefers-contrast: high) {
  .fridge-glass-scan {
    border-width: 3px;
    border-color: var(--fridge-scan-primary);
  }

  .fridge-icon-scan {
    border-width: 4px;
    border-color: var(--fridge-scan-primary);
    box-shadow:
      0 0 20px var(--fridge-scan-primary),
      inset 0 2px 0 rgba(255,255,255,0.5);
  }

  .fridge-btn-scan-primary {
    border-width: 3px;
    border-color: var(--fridge-scan-primary);
    background: linear-gradient(135deg,
      var(--fridge-scan-primary),
      var(--fridge-scan-accent)
    );
  }

  .fridge-btn-danger {
    border-width: 3px;
    border-color: rgba(239, 68, 68, 0.8);
  }
}

/* =========================================
   ACCESSIBILITY - FOCUS STATES
   ========================================= */

.fridge-btn-scan-primary:focus-visible,
.fridge-btn-danger:focus-visible {
  outline: 3px solid color-mix(in srgb, var(--fridge-scan-primary) 70%, transparent);
  outline-offset: 3px;
}

/* =========================================
   UTILITY CLASSES
   ========================================= */

.fridge-text-glow {
  text-shadow: 0 0 25px color-mix(in srgb, var(--fridge-scan-primary) 50%, transparent);
}

.fridge-text-glow-strong {
  text-shadow:
    0 0 20px color-mix(in srgb, var(--fridge-scan-primary) 70%, transparent),
    0 0 40px color-mix(in srgb, var(--fridge-scan-primary) 50%, transparent);
}

.fridge-no-animate {
  animation: none !important;
}

/* =========================================
   CONTAINMENT FOR PERFORMANCE
   ========================================= */

.fridge-glass-scan,
.fridge-icon-scan,
.fridge-btn-scan-primary {
  contain: layout style paint;
  isolation: isolate;
}
